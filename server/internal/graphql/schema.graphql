type Article {
  id: ID!
  title: String!
  link: String!
  description: String
  content: String
  author: String
  publishedAt: String!
  createdAt: String!
}

type DossierConfig {
  id: ID!
  title: String!
  email: String!
  feedUrls: [String!]!
  articleCount: Int!
  frequency: String!
  deliveryTime: String!
  timezone: String!
  tone: String
  language: String
  specialInstructions: String
  active: Boolean!
  createdAt: String!
}

input DossierConfigInput {
  title: String!
  email: String!
  feedUrls: [String!]!
  articleCount: Int!
  frequency: String!
  deliveryTime: String!
  timezone: String!
  tone: String
  language: String
  specialInstructions: String
}

type Dossier {
  id: ID!
  configId: ID!
  subject: String!
  content: String!
  sentAt: String!
}

type Tone {
  id: ID!
  name: String!
  prompt: String!
  isSystemDefault: Boolean!
  createdAt: String!
  updatedAt: String!
}

input ToneInput {
  name: String!
  prompt: String!
}

type Query {
  dossierConfigs: [DossierConfig!]!
  dossierConfig(id: ID!): DossierConfig
  dossiers(configId: ID, limit: Int): [Dossier!]!
  schedulerStatus: SchedulerStatus!
  tones: [Tone!]!
  tone(id: ID!): Tone
}

type SchedulerStatus {
  running: Boolean!
  nextCheck: String
  activeDossiers: Int!
}

type Mutation {
  createDossierConfig(input: DossierConfigInput!): DossierConfig!
  updateDossierConfig(id: ID!, input: DossierConfigInput!): DossierConfig!
  deleteDossierConfig(id: ID!): Boolean!
  toggleDossierConfig(id: ID!, active: Boolean!): DossierConfig!

  generateAndSendDossier(configId: ID!): Dossier!
  sendTestEmail(configId: ID!): Boolean!
  testEmailConnection(
    email: String!
    smtpHost: String!
    smtpPort: Int!
    smtpUser: String!
    smtpPass: String!
  ): Boolean!

  createTone(input: ToneInput!): Tone!
  updateTone(id: ID!, input: ToneInput!): Tone!
  deleteTone(id: ID!): Boolean!
}
